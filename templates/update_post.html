{% extends "base.html" %}
{% block title %}Update blog post{% endblock %}


{% block content %}

<section id="add-book" class="pb-5 container">
    <div class="row justify-content-center">
        <div class="col col-md-8">
            <h1 class="page-title mt-5 mb-5">Update Post</h1>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col col-md-8">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button class="btn border-dark bd-highlight text-black btn-clear">Update</button>
                <a class="btn border-dark bd-highlight text-black btn-clear" href="{% url 'blog' %}">back</a>
            </form>
        </div>
    </div>
</section>

{% endblock %}

{% block js %}
<script>
    // convert Post title to slug-format on front-end, help from mentor Tim Nelson
    /* jshint esversion: 11 */
    let title = document.getElementById("id_title");
    let slug = document.getElementById("id_slug");
    title?.addEventListener("keyup", convertToSlug);
    slug?.addEventListener("keyup", convertToSlug);

    function convertToSlug() {
      slug.value = title.value.toLowerCase()
                 .replace(/ /g, '-')
                 .replace(/[^\w-]+/g, '');
    }
</script>
{% endblock %}
